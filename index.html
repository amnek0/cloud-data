<!DOCTYPE html>
<meta charset="utf-8">
<html>
  <head>
    <title>Cloud Data</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap-->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/main.css" rel="stylesheet">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
	<div class="container">
		<h1>Cloud investigation</h1>
		<p>The below summarizes an investigation of cloud usage across a series of datasets from the <a href="http://www.crunchbase.com/company/techcrunch">TechCrunch CrunchBase API</a> and from the 2000 most popular sites on the Web, as measured by US traffic, by <a href="http://www.alexa.com/topsites/countries/US">Alexa</a>.</p>
		<p>The TechCrunch CrunchBase API was used to gather all domains for all startups from January 1, 2006 through January, 1 2014. Startups that were unfunded, "deadpooled" (no longer in operation), did not list a web address, or had a web address that was not registered were removed from the datasets. This data was sliced by year.</p>
		<p>The Alexa data was gathered from <a href="http://aws.amazon.com/awis/">Amazon's Alexa Web Information Service</a> and represents the 2000 most popular sites based on US traffic as measured on December 22, 2013.</p>
		<p>Five of the most popular cloud hosts, Google, Microsoft, SoftLayer, Rackspace, and Amazon, were tracked across these domains.</p>
		<p>For each domain name, the IP address was retrieved. From this IP address, the organization was retrieved from <a href="http://arin.net">ARIN</a>. If this organization was in our list of five cloud hosts, the count for the cloud host was incremented.</p>
	      <h2 id="details">Summary of CrunchBase and Alexa datasets</h2>
			<table class="table-striped table-hover" id="agg">
		    	<thead>
				<tr>
					<th>Data Set</th>
					<th>Total</th>
					<th>Total not in Cloud</th>
					<th>Total in Cloud</th>
					<th>Amazon</th>
					<th>Rackspace</th>
					<th>SoftLayer</th>
					<th>Microsoft</th>
					<th>Google</th>
				</tr>
				</thead>
				<tr>
					<td><a href="data/downloads/crunchbase_2006.csv">CrunchBase 2006</a></td>
					<td>3915</td>
					<td>3140 or 80.20%</td>
					<td>775 or 19.80%</td>
					<td>383 or 9.78%</td>
					<td>260 or 6.64%</td>
					<td>94 or 2.40%</td>
					<td>23 or 0.59%</td>
					<td>15 or 0.38%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/crunchbase_2007.csv">CrunchBase 2007</a></td>
					<td>5569</td>
					<td>4376 or 78.58%</td>
					<td>1193 or 21.42%</td>
					<td>613 or 11.01%</td>
					<td>421 or 7.56%</td>
					<td>110 or 1.98%</td>
					<td>20 or 0.36%</td>
					<td>29 or 0.52%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/crunchbase_2008.csv">CrunchBase 2008</a></td>
					<td>6694</td>
					<td>5297 or 79.13%</td>
					<td>1397 or 20.87%</td>
					<td>749 or 11.19%</td>
					<td>450 or 6.72%</td>
					<td>128 or 1.91%</td>
					<td>30 or 0.45%</td>
					<td>40 or 0.60%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/crunchbase_2009.csv">CrunchBase 2009</a></td>
					<td>10455</td>
					<td>7393 or 70.71%</td>
					<td>3062 or 29.29%</td>
					<td>2017 or 19.29%</td>
					<td>603 or 5.77%</td>
					<td>195 or 1.87%</td>
					<td>115 or 1.10%</td>
					<td>132 or 1.26%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/crunchbase_2010.csv">CrunchBase 2010</a></td>
					<td>9386</td>
					<td>6958 or 74.13%</td>
					<td>2428 or 25.87%</td>
					<td>1445 or 15.40%</td>
					<td>647 or 6.89%</td>
					<td>184 or 1.96%</td>
					<td>71 or 0.76%</td>
					<td>81 or 0.86%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/crunchbase_2011.csv">CrunchBase 2011</a></td>
					<td>10457</td>
					<td>7408 or 70.84%</td>
					<td>3049 or 29.16%</td>
					<td>2008 or 19.20%</td>
					<td>602 or 5.76%</td>
					<td>197 or 1.88%</td>
					<td>114 or 1.09%</td>
					<td>128 or 1.22%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/crunchbase_2012.csv">CrunchBase 2012</a></td>
					<td>10293</td>
					<td>7223 or 70.17%</td>
					<td>3070 or 29.83%</td>
					<td>2010 or 19.53%</td>
					<td>549 or 5.33%</td>
					<td>220 or 2.14%</td>
					<td>151 or 1.47%</td>
					<td>140 or 1.36%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/crunchbase_2010_2013.csv">CrunchBase 2013</a></td>
					<td>5945</td>
					<td>4292 or 72.20%</td>
					<td>1653 or 27.80%</td>
					<td>1124 or 18.91%</td>
					<td>241 or 4.05%</td>
					<td>127 or 2.14%</td>
					<td>98 or 1.65%</td>
					<td>63 or 1.06%</td>
				</tr>
				<tr>
					<td><a href="data/downloads/top_2000.csv">Alexa Top 2000</a></td>
					<td>1863</td>
					<td>1512 or 81.16%</td>
					<td>351 or 18.84%</td>
					<td>174 or 9.34%</td>
					<td>82 or 4.40%</td>
					<td>61 or 3.27%</td>
					<td>10 or 0.54%</td>
					<td>24 or 1.29%</td>
				</tr>
			</table> <!-- / agg table -->
			<h2>CrunchBase data, stacked bars</h2>
			<div id="graph_container"></div>
			<p class="graph_caption">Cloud services by year</p>
			<br/>
			<h2>CrunchBase data, linear regression</h2>
			<div><img src="img/crunchbase_lin_reg.jpg"></div>
			<br/><br/>
			<p>A linear regression of the CrunchBase produces a line with a reasonable fit. An upward trend in cloud usage appears to be a reasonable interpretation.</p>
			
			<script src="js/d3.v3.min.js"></script>
			<script>

			var margin = {top: 20, right: 20, bottom: 30, left: 40},
			    width = 960 - margin.left - margin.right,
			    height = 500 - margin.top - margin.bottom;

			var x = d3.scale.ordinal()
			    .rangeRoundBands([0, width], .1);

			var y = d3.scale.linear()
			    .rangeRound([height, 0]);

			var color = d3.scale.ordinal()
			    .range(["#98abc5", "#8a89a6", "#7b6888", "#6b486b", "#a05d56", "#d0743c", "#ff8c00"]);

			var xAxis = d3.svg.axis()
			    .scale(x)
			    .orient("bottom");

			var yAxis = d3.svg.axis()
			    .scale(y)
			    .orient("left")
			    .tickFormat(d3.format(".2s"));

			var bar_svg = d3.select("#graph_container").append("svg")
			    .attr("width", width + margin.left + margin.right)
			    .attr("height", height + margin.top + margin.bottom)
			  .append("g")
			    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

			d3.csv("data.csv", function(error, data) {
			  color.domain(d3.keys(data[0]).filter(function(key) { return key !== "ds"; }));

			  data.forEach(function(d) {
			    var y0 = 0;
			    d.ages = color.domain().map(function(name) { return {name: name, y0: y0, y1: y0 += +d[name]}; });
			    d.total = d.ages[d.ages.length - 1].y1;
			  });

			  /*data.sort(function(a, b) { return b.total - a.total; });*/

			  x.domain(data.map(function(d) { return d.ds; }));
			  y.domain([0, d3.max(data, function(d) { return d.total; })]);

			  bar_svg.append("g")
			      .attr("class", "x axis")
			      .attr("transform", "translate(0," + height + ")")
			      .call(xAxis);

			  bar_svg.append("g")
			      .attr("class", "y axis")
			      .call(yAxis)
			    .append("text")
			      .attr("transform", "rotate(-90)")
			      .attr("y", 6)
			      .attr("dy", ".71em")
			      .style("text-anchor", "end")
			      .text("Percent of total names");

			  var ds = bar_svg.selectAll(".ds")
			      .data(data)
			    .enter().append("g")
			      .attr("class", "g")
			      .attr("transform", function(d) { return "translate(" + x(d.ds) + ",0)"; });

			  ds.selectAll("rect")
			      .data(function(d) { return d.ages; })
			    .enter().append("rect")
			      .attr("width", x.rangeBand())
			      .attr("y", function(d) { return y(d.y1); })
			      .attr("height", function(d) { return y(d.y0) - y(d.y1); })
			      .style("fill", function(d) { return color(d.name); });

			  var legend = bar_svg.selectectAll(".legend")
			      .data(color.domain().slice().reverse())
			    .enter().append("g")
			      .attr("class", "legend")
			      .attr("transform", function(d, i) { return "translate(0," + i * 20 + ")"; });

			  legend.append("rect")
			      .attr("x", 90)
			      .attr("width", 18)
			      .attr("height", 18)
			      .style("fill", color);

			  legend.append("text")
			      .attr("x", 84)
			      .attr("y", 9)
			      .attr("dy", ".35em")
			      .style("text-anchor", "end")
			      .text(function(d) { return d; });

			});
			</script>
	</div> <!-- /container -->
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://code.jquery.com/jquery.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
    <script src="js/jquery.tablesorter.min.js"></script>
	<script type="text/javascript">
		$(document).ready(function() { 
		        $("table").tablesorter(); 
		    } 
		);
	</script>

  </body>
</html>
